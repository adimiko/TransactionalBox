"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[899],{1456:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=s(4848),o=s(8453);const i={sidebar_position:1},r="Introduction",a={id:"introduction",title:"Introduction",description:"Logo",source:"@site/docs/introduction.md",sourceDirName:".",slug:"/introduction",permalink:"/docs/introduction",draft:!1,unlisted:!1,editUrl:"https://github.com/adimiko/TransactionalBox/tree/main/documentation/docs/introduction.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Getting Started",permalink:"/docs/getting-started"}},c={},d=[{value:"\ud83c\udff0 Architecture",id:"european_castle-architecture",level:2},{value:"Outbox",id:"outbox",level:3},{value:"Inbox",id:"inbox",level:3},{value:"Terms",id:"terms",level:2}];function l(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)("div",{align:"center",children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Logo",src:s(798).A+"",width:"1280",height:"640"})})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Transactional box is an implementation of the outbox and inbox pattern in .NET."}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Ensures reliable network communication (eventual consistency) between services."})]}),"\n",(0,t.jsxs)(n.p,{children:["All complexity is taken over by the transactional box and simplifies communication between services to the maximum extent possible.",(0,t.jsx)(n.br,{}),"\n","It is designed for a low entry threshold and quick learning."]}),"\n",(0,t.jsx)(n.p,{children:"Examples of problems that occur during network communication:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Lost message"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Amount was taken from bank account and transfer was never executed."})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"The same message was processed again"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Transfer was ordered and amount was debited from bank account twice."})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Unavailable service"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Transfer order attempt fails."})}),"\n",(0,t.jsxs)(n.h2,{id:"european_castle-architecture",children:["\ud83c\udff0"," Architecture"]}),"\n",(0,t.jsx)(n.p,{children:"The transactional box consists of two basic components.\nThe following diagrams show the basic flow (omits details).\nThey are designed to provide a general understanding of how transactional box works."}),"\n",(0,t.jsx)(n.h3,{id:"outbox",children:"Outbox"}),"\n",(0,t.jsx)(n.p,{children:"The outbox is responsible for adding messages to the storage and then adding at least once to the transport."}),"\n",(0,t.jsx)("div",{align:"center",children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Outbox",src:s(7686).A+"",width:"1698",height:"668"})})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In one transaction you save message to outbox and result of business operation. In this way, you can ensure all or nothing. After correctly transaction commited, execute the ",(0,t.jsx)(n.code,{children:"TransactionCommitted"})," method on ",(0,t.jsx)(n.code,{children:"IOutbox"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"In a separate process, Outbox will get messages and add them to the transport."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"inbox",children:"Inbox"}),"\n",(0,t.jsx)(n.p,{children:"The inbox is responsible for getting messages from the transport and adding them to the storage, and then processes these messages."}),"\n",(0,t.jsx)("div",{align:"center",children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Inbox",src:s(4769).A+"",width:"1782",height:"668"})})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Inbox gets messages from transport and adds to storage."}),"\n",(0,t.jsx)(n.li,{children:"In a separate process, Outbox will get messages and process them."}),"\n",(0,t.jsx)(n.li,{children:"Then processed messages are clean up."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"terms",children:"Terms"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"OutboxMessage"})})," - message that is added to the outbox and then converted to ",(0,t.jsx)(n.code,{children:"TransportMessage"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TransportMessage"})})," - object transporting collections of messages of the same type (created on the basis of ",(0,t.jsx)(n.code,{children:"OutboxMessages"}),"). It is sent at least once."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"InboxMessage"})})," - created on the basis of ",(0,t.jsx)(n.code,{children:"TransportMessage"})," and stored in the inbox. It is then processed."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"IdempotentInboxKey"})})," - incoming message identifier. It is needed for deduplication."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},4769:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/inbox-5630c7c0088ce6d371a5ed785954435c.png"},7686:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/outbox-b817581e75b0f7fb7f37275b25b2e033.png"},798:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/rounded-social-logo-8b9da6428b0265a2a74a9757231b8de7.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);